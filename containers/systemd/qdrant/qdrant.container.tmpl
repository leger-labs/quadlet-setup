# Generated by Chezmoi - DO NOT EDIT MANUALLY

[Unit]
Description=Qdrant Vector Database for OpenWebUI RAG
After=network-online.target llm.network.service
Requires=llm.network.service

[Container]
Image=docker.io/qdrant/qdrant:latest
AutoUpdate=registry
ContainerName=qdrant

# Network - internal only, no published port needed
Network=llm.network

# Optional: Publish dashboard port for monitoring (comment out for production)
# PublishPort=127.0.0.1:{{ .published_ports.qdrant }}:6333

# Volume for persistent storage
Volume=qdrant.volume:/qdrant/storage:Z

# Environment variables
Environment=QDRANT__SERVICE__API_KEY={{ .api_keys.qdrant }}
Environment=QDRANT__TELEMETRY_DISABLED=true
Environment=QDRANT__LOG_LEVEL=INFO

# Health check
HealthCmd="timeout 3s bash -c ':> /dev/tcp/127.0.0.1/6333' || exit 1"
HealthInterval=30s
HealthTimeout=5s
HealthRetries=3
HealthStartPeriod=20s

[Service]
Slice=llm.slice
TimeoutStartSec=900
Restart=on-failure
RestartSec=10

[Install]
WantedBy=scroll-session.target
